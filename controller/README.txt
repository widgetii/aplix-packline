========================================================================

                         PackLine Controller

========================================================================

1. ОПИСАНИЕ ПРОГРАММЫ

PackLine Controller - программа управления конвейером упаковочной лини, 
осуществляющая запуск и остановку линии через реле. Работает в паре с 
программой PackLine. 

Алгоритм работы контроллера: станция упаковки дает команду контроллеру, 
что посылка упакована (помещать в очередь), а на станции маркировки дает 
команду - убрать из очереди. Как только в очереди появляется новая посылка, 
конвейер автоматически включается, как только все посылки обработаны - 
автоматически выключается. По сути, контроллер представляет собой некий 
диспетчер, который владеет информацией, что сейчас лежит на конвейере. 
Если посылка лежит на линии более 10 мин и так и не появляется у стола 
маркировки, то контроллер убирает данную посылку из очереди и, если других 
посылок нет, выключает конвейер.
Приложение может выводить на экран информацию о состоянии линии (работает/
остановлена), количество посылок на конвейере, а также позволяет вручную 
запустить или остановить конвейер.


2. ИСПОЛНЯЕМАЯ СРЕДА

Программа представляет собой веб-приложение, работающее под управлением
сервера приложений Tomcat, Jetty, JBoss. Для просмотра информации о работе
линии и ручного управления используется интернет-браузер: 
	
	http://localhost:8080/packline/controller/
	
Вместо localhost:8080 нужно подставить рабочий адрес контроллера.


3. НАСТРОЙКА

Управление реле осуществляется с помощью аппаратного блока MP709. Данный 
блок подключается по USB и может принимать команды управления посредством 
командной строки.
 
В программе есть две настройки «cmdStartPackLine» и «cmdStopPackLine», в 
которые записывается нужные команды. Данные команды вызываются программой, 
когда линию нужно включить или выключить соответственно.

Настройка «ParcelStaleTimeout» означает время в миллисекундах, по истечении 
которого посылка, добавленная ранее в очередь, считается устаревшей, после 
чего эта посылка из очереди убирается. По умолчанию данный параметр равен 
10 минутам.

Параметры контроллера устанавливаются в сервере приложений, откуда передаются
в программу через JNDI. Примеры конфигурационных файлов находятся в папке 
/target/config/.

